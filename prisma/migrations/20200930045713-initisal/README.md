# Migration `20200930045713-initisal`

This migration has been generated by wilson-pc at 9/30/2020, 12:57:13 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "User" (
    "id" TEXT NOT NULL,
    "email" TEXT NOT NULL,
    "name" TEXT NOT NULL,
    "password" TEXT NOT NULL,
PRIMARY KEY ("id")
)

CREATE TABLE "Profile" (
    "id" TEXT NOT NULL,
    "bio" TEXT NOT NULL,
    "userId" TEXT NOT NULL,

    FOREIGN KEY ("userId") REFERENCES "User"("id") ON DELETE CASCADE ON UPDATE CASCADE,
PRIMARY KEY ("id")
)

CREATE TABLE "Post" (
    "id" TEXT NOT NULL,
    "createdAt" DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "title" TEXT NOT NULL,
    "content" TEXT NOT NULL,
    "published" BOOLEAN NOT NULL DEFAULT false,
    "authorId" TEXT NOT NULL,

    FOREIGN KEY ("authorId") REFERENCES "User"("id") ON DELETE CASCADE ON UPDATE CASCADE,
PRIMARY KEY ("id")
)

CREATE TABLE "Comment" (
    "id" TEXT NOT NULL,
    "message" TEXT,
    "createdAt" DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "postId" TEXT NOT NULL,
    "userId" TEXT,

    FOREIGN KEY ("postId") REFERENCES "Post"("id") ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY ("userId") REFERENCES "User"("id") ON DELETE SET NULL ON UPDATE CASCADE,
PRIMARY KEY ("id")
)

CREATE TABLE "Category" (
    "id" TEXT NOT NULL,
    "name" TEXT NOT NULL,
PRIMARY KEY ("id")
)

CREATE TABLE "Video" (
    "id" TEXT NOT NULL,
    "name" TEXT NOT NULL,
    "hls" BOOLEAN NOT NULL DEFAULT false,
PRIMARY KEY ("id")
)

CREATE TABLE "_CategoryToPost" (
    "A" TEXT NOT NULL,
    "B" TEXT NOT NULL,

    FOREIGN KEY ("A") REFERENCES "Category"("id") ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY ("B") REFERENCES "Post"("id") ON DELETE CASCADE ON UPDATE CASCADE
)

CREATE UNIQUE INDEX "User.email_unique" ON "User"("email")

CREATE UNIQUE INDEX "Profile_userId_unique" ON "Profile"("userId")

CREATE UNIQUE INDEX "Post.title_unique" ON "Post"("title")

CREATE UNIQUE INDEX "Category.name_unique" ON "Category"("name")

CREATE UNIQUE INDEX "Video.name_unique" ON "Video"("name")

CREATE UNIQUE INDEX "_CategoryToPost_AB_unique" ON "_CategoryToPost"("A", "B")

CREATE INDEX "_CategoryToPost_B_index" ON "_CategoryToPost"("B")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20200930045713-initisal
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,71 @@
+// This is your Prisma schema file,
+// learn more about it in the docs: https://pris.ly/d/prisma-schema
+
+datasource db {
+  provider = "sqlite"
+  url = "***"
+}
+
+generator client {
+  provider = "prisma-client-js"
+}
+
+generator typegraphql {
+  provider = "typegraphql-prisma"
+  output   = "../src/prisma/generated"
+}
+
+model User {
+  id       String    @id @default(uuid())
+  email    String    @unique
+  name     String
+  password String
+  comments Comment[]
+  posts    Post[]
+  profile  Profile?
+
+}
+
+model Profile {
+  id     String @id @default(uuid())
+  bio    String
+  user   User   @relation(fields: [userId], references: [id])
+  userId String
+}
+
+model Post {
+  id         String     @id @default(uuid())
+  createdAt  DateTime   @default(now())
+  title      String     @unique
+  content    String
+  published  Boolean    @default(false)
+  author     User       @relation(fields: [authorId], references: [id])
+  authorId   String
+  categories Category[] @relation(references: [id])
+  comments   Comment[]
+}
+
+model Comment {
+  id        String   @id @default(uuid())
+  message   String?
+  createdAt DateTime @default(now())
+  postId    String
+  post      Post     @relation(fields: [postId], references: [id])
+  user      User?    @relation(fields: [userId], references: [id])
+
+  userId String?
+}
+
+model Category {
+  id    String @id @default(uuid())
+  name  String @unique
+  posts Post[] @relation(references: [id])
+
+}
+
+model Video {
+  id    String @id @default(uuid())
+  name  String @unique
+  hls Boolean @default(false)
+
+}
```


